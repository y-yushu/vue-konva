(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0d7674"],{7753:function(e,t,o){"use strict";o.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"app-container"},[e._m(0),t("div",{ref:"container",staticClass:"container",attrs:{id:"container"}})])},n=[function(){var e=this,t=e._self._c;return t("div",[t("h1",[e._v("多选操作（测试用的demo,路由列表没有列出）")])])}],s=o("1b62"),a=o("362d"),r=o.n(a),c={name:"SelectAndTransform",mixins:[s["b"]],data(){return{starPosition:{x1:"",x2:"",y1:"",y2:""},isFirst:!0}},created(){setTimeout(()=>{this.addElem()},20)},methods:{addElem(){const e=this.pageStage,t=this.pageLayer[0].layer,o=new r.a.Rect({x:60,y:60,width:100,height:90,fill:"red",name:"rect",draggable:!0});t.add(o);const i=new r.a.Rect({x:250,y:100,width:150,height:90,fill:"green",name:"rect",draggable:!0});t.add(i);const n=new r.a.Transformer({name:"tr"});t.add(n),n.nodes([o,i]),t.draw();var s=new r.a.Rect({fill:"rgba(0,0,255,0.5)",visible:!1});t.add(s),this.mousedownTouchstart(e,s,t),this.mousemoveTouchmove(e,s,t),this.mouseupTouchend(e,t,s,n),this.clickTap(e,t,s,n)},mousedownTouchstart(e,t,o){e.on("mousedown touchstart",i=>{if(i.target!==e)return;console.log("触发mousedown");const n=e.getPointerPosition().x,s=e.getPointerPosition().y,a=e.getPointerPosition().x,r=e.getPointerPosition().y;this.starPosition={x1:n,x2:a,y1:s,y2:r},t.visible(!0),t.width(0),t.height(0),o.draw()})},mousemoveTouchmove(e,t,o){e.on("mousemove touchmove",()=>{if(!t.visible())return;console.log("触发mousemove");const{x1:i,y1:n}=this.starPosition,s=e.getPointerPosition().x,a=e.getPointerPosition().y;t.setAttrs({x:Math.min(i,s),y:Math.min(n,a),width:Math.abs(s-i),height:Math.abs(a-n)}),o.batchDraw()})},mouseupTouchend(e,t,o,i){e.on("mouseup touchend",()=>{if(!o.visible())return;console.log("触发mouseup"),setTimeout(()=>{o.visible(!1),t.batchDraw()});var n=e.find(".rect").toArray();console.log("选择结果",n);const s=o.getClientRect(),a=n.filter(e=>r.a.Util.haveIntersection(s,e.getClientRect()));i.nodes(a),t.batchDraw()})},clickTap(e,t,o,i){e.on("click tap",n=>{if(o.visible())return;if(console.log("触发click"),n.target===e)return i.nodes([]),void t.draw();if(!n.target.hasName("rect"))return;const s=n.evt.shiftKey||n.evt.ctrlKey||n.evt.metaKey,a=i.nodes().indexOf(n.target)>=0;if(s||a){if(s&&a){const e=i.nodes().slice();e.splice(e.indexOf(n.target),1),i.nodes(e)}else if(s&&!a){const e=i.nodes().concat([n.target]);i.nodes(e)}}else i.nodes([n.target]);t.draw()})}}},d=c,l=o("2877"),h=Object(l["a"])(d,i,n,!1,null,null,null);t["default"]=h.exports}}]);
//# sourceMappingURL=chunk-2d0d7674.c2ecb75d.js.map