(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d228fdd"],{dc19:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"app-container"},[t._m(0),e("div",{ref:"container",staticClass:"container",attrs:{id:"container"}}),e("el-row",[e("el-col",[e("el-button",{attrs:{type:"primary"},on:{click:t.selectsAll}},[t._v("选中所有形状")])],1)],1)],1)},n=[function(){var t=this,e=t._self._c;return e("div",[e("h1",[t._v("基础展示（Shift增加一个;Ctrl减少一个）")])])}],o=s("1b62"),a=s("362d"),r=s.n(a),c={name:"SelectAndTransform",mixins:[o["b"]],data(){return{starStyle:{fill:"blue",numPoints:3,innerRadius:20,outerRadius:25,draggable:!0,shadowOffsetX:5,shadowOffsetY:5},starPosition:{x1:"",x2:"",y1:"",y2:""},isFirst:!0}},created(){setTimeout(()=>{this.addElem()},20)},methods:{addElem(){const t=this.pageStage,e=this.pageLayer[0].layer,s=[];for(let o=0;o<10;o++){const i=new r.a.Star(Object.assign({},this.starStyle,{x:t.width()*Math.random(),y:t.height()*Math.random(),name:"star_"+o}));s.push(i),e.add(i)}const i=new r.a.Transformer({name:"tr"});e.add(i),this.selectsAll(t),e.draw();var n=new r.a.Rect({fill:"rgba(0,0,255,0.5)",visible:!1});e.add(n),this.mousedownTouchstart(t,n,e),this.mousemoveTouchmove(t,n,e),this.mouseupTouchend(t,e,n,i),this.clickTap(t,e,n,i)},selectsAll(t){const e=this.pageLayer[0].layer,s=[];let i="";e.children.forEach(t=>{-1!==t.getName().indexOf("star_")&&s.push(t),"tr"===t.getName()&&(i=t)}),i.nodes(s),e.batchDraw()},mousedownTouchstart(t,e,s){t.on("mousedown touchstart",i=>{if(i.target!==t)return;const n=t.getPointerPosition().x,o=t.getPointerPosition().y,a=t.getPointerPosition().x,r=t.getPointerPosition().y;this.starPosition={x1:n,x2:a,y1:o,y2:r},e.visible(!0),e.width(0),e.height(0),s.draw()})},mousemoveTouchmove(t,e,s){t.on("mousemove touchmove",()=>{if(!e.visible())return;const{x1:i,y1:n}=this.starPosition,o=t.getPointerPosition().x,a=t.getPointerPosition().y;e.setAttrs({x:Math.min(i,o),y:Math.min(n,a),width:Math.abs(o-i),height:Math.abs(a-n)}),s.batchDraw()})},mouseupTouchend(t,e,s,i){t.on("mouseup touchend",()=>{if(!s.visible())return;setTimeout(()=>{s.visible(!1),e.batchDraw()});const t=[];e.children.forEach(e=>{-1!==e.getName().indexOf("star_")&&t.push(e)});const n=s.getClientRect(),o=t.filter(t=>r.a.Util.haveIntersection(n,t.getClientRect()));i.nodes(o),e.batchDraw()})},clickTap(t,e,s,i){t.on("click tap",n=>{if(s.visible())return;if(n.target===t)return i.nodes([]),void e.draw();if(-1===n.target.getName().indexOf("star_"))return;const o=n.evt.shiftKey||n.evt.ctrlKey||n.evt.metaKey,a=i.nodes().indexOf(n.target)>=0;if(o||a){if(o&&a){const t=i.nodes().slice();t.splice(t.indexOf(n.target),1),i.nodes(t)}else if(o&&!a){const t=i.nodes().concat([n.target]);i.nodes(t)}}else i.nodes([n.target]);e.draw()})}}},d=c,l=s("2877"),h=Object(l["a"])(d,i,n,!1,null,null,null);e["default"]=h.exports}}]);
//# sourceMappingURL=chunk-2d228fdd.e25da73b.js.map