(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4d4e33a4"],{"5f49":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app-container"},[t._m(0),i("div",{staticStyle:{"margin-bottom":"10px"}},[i("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.opendialog1()}}},[t._v("上传背景")]),i("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.opendialog2()}}},[t._v("增加文字")]),i("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.getPicture()}}},[t._v("下载图片")])],1),i("div",{ref:"container",attrs:{id:"container"}}),i("el-dialog",{attrs:{title:"选择背景",visible:t.visible1,width:"30%"},on:{"update:visible":function(e){t.visible1=e}}},[i("input",{ref:"file",attrs:{type:"file",accept:"image/png, image/jpeg"},on:{change:t.changeFile}})]),i("el-dialog",{attrs:{title:"文字信息",visible:t.visible2,width:"30%"},on:{"update:visible":function(e){t.visible2=e}}},[i("el-input",{staticStyle:{"margin-bottom":"10px"},attrs:{placeholder:"输入字号"},model:{value:t.textProp.fontSize,callback:function(e){t.$set(t.textProp,"fontSize",e)},expression:"textProp.fontSize"}},[i("template",{slot:"prepend"},[t._v("输入字号")])],2),i("el-input",{staticStyle:{"margin-bottom":"10px"},attrs:{placeholder:"输入色号"},model:{value:t.textProp.fill,callback:function(e){t.$set(t.textProp,"fill",e)},expression:"textProp.fill"}},[i("template",{slot:"prepend"},[t._v("输入色号")])],2),i("el-input",{staticStyle:{"margin-bottom":"10px"},attrs:{placeholder:"输入文本"},model:{value:t.textProp.text,callback:function(e){t.$set(t.textProp,"text",e)},expression:"textProp.text"}},[i("template",{slot:"prepend"},[t._v("输入文本")])],2),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.addTest()}}},[t._v("添加")])],1)],1)],1)},n=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("h1",[t._v("生成背景图片")])])}],r=(i("7db0"),i("362d")),l=i.n(r),o={name:"GenerateBackground",data:function(){return{pageStage:null,layer:null,tran:null,texts:[],visible1:!1,visible2:!1,textProp:{x:0,y:0,text:"Simple Text",fontSize:45,fontFamily:"Calibri",fill:"#ffffff",draggable:!0}}},methods:{opendialog1:function(){this.visible1=!0},opendialog2:function(){if(!this.layer)return this.$message.error("请先上传背景");this.visible2=!0},getPicture:function(){if(!this.layer)return this.$message.error("请先上传背景");this.tran.nodes([]),this.layer.draw();var t=document.createElement("a");t.href=this.pageStage.toDataURL(),t.download="text.png",document.body.appendChild(t),t.click(),document.body.removeChild(t)},changeFile:function(){var t=this,e=this.$refs.file.files[0];if(e){var i=new FileReader;i.onloadend=function(e){var i=new Image;i.src=e.target.result,i.onload=function(){t.visible1=!1,t.pageStage=new l.a.Stage({container:"container",width:i.width,height:i.height});var e=new l.a.Layer;t.pageStage.add(e);var a=new l.a.Image({image:i,x:0,y:0,width:i.width,height:i.height,draggable:!1});a.cache(),a.filters([l.a.Filters.Brighten]),e.add(a),e.draw(),t.layer=e,t.clickTap()}},i.readAsDataURL(e)}},addTest:function(){this.visible2=!1;var t=new l.a.Text(this.textProp);if(this.tran)this.tran.nodes([t]);else{var e=new l.a.Transformer({nodes:[t],centeredScaling:!1});this.layer.add(e),this.tran=e}this.texts.push(t),this.layer.add(t),this.layer.batchDraw()},clickTap:function(){var t=this;this.pageStage.on("click tap",(function(e){if(t.texts){var i=t.texts.find((function(t){return e.target===t}));i?t.tran.nodes([i]):t.tran.nodes([]),t.layer.draw()}}))}}},s=o,c=i("2877"),d=Object(c["a"])(s,a,n,!1,null,null,null);e["default"]=d.exports},"7db0":function(t,e,i){"use strict";var a=i("23e7"),n=i("b727").find,r=i("44d2"),l=i("ae40"),o="find",s=!0,c=l(o);o in[]&&Array(1)[o]((function(){s=!1})),a({target:"Array",proto:!0,forced:s||!c},{find:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}}),r(o)}}]);
//# sourceMappingURL=chunk-4d4e33a4.f1161d73.js.map